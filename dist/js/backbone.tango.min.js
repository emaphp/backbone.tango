!function(a,b){"function"==typeof define&&define.amd?define(["backbone","underscore"],function(c,d){return b(a,c,d)}):"undefined"!=typeof exports?module.exports=b(a,require("backbone"),require("underscore")):b(a,a.Backbone,a._)}(this,function(a,b,c){function d(a){j||(j=g("<div/>").addClass(a.options.overlayClass),j._childs={},c.extend(j,b.Events),j.hide(),j.appendTo(g(a.options.target)),j.fadeIn({duration:150,easing:"swing"}));var d=a.cid;return j._childs[d]=a,j.listenTo(a,"hidden",function(){j.stopListening(a),delete j._childs[d],0===c.keys(j._childs).length&&j.fadeOut({duration:250,easing:"swing",complete:function(){e()}})}),j}function e(){j&&(j.remove(),j=null)}function f(a){return c.isObject(a)?a:{message:a}}var g=b.$,h=0,i={},j=null,k={target:"body",containerBaseId:"tango-container",containerClass:"tango-container",viewClass:o,cssClass:"tango",position:"top-right",type:"info",timeout:5e3,newestOnTop:!0,template:void 0,templateFn:void 0,render:!0,clearAll:!1,clearContainer:!1,includeDefaultVars:!0,templateVars:{},overlay:!1,overlayClass:"tango-overlay",showMethod:"fadeIn",showDuration:250,showEasing:"swing",hideMethod:"fadeOut",hideDuration:650,hideEasing:"swing",onHidden:void 0,onShown:void 0,tapToDismiss:!0,extendedTimeout:1e3},l=c.template('<div class="<%=cssClass%>"><% if (isLoader) { %><div class="tango-loader-pulse"><div></div><div></div><div></div></div><% } %><%=message%></div>'),m=b.Tango={};m.VERSION="0.3.0",m.defaultTemplate=l,m.ViewState={beforeShown:0,afterShown:1,beforeHidden:2,afterHidden:3},m.clearAll=function(a){for(var b in i){var c=i[b].childList;for(var d in c)d!==a&&i[b].childList[d].hide(!0)}};var n=m.Notifier=function(a){var b=c.extend({},k);c.isFunction(a)?c.isObject(a.defaults)?(this.defaults=c.extend(b,a.defaults),this.defaults.viewClass=a):this.defaults=c.extend(b,a.call()):this.defaults=c.extend(b,c.isObject(a)?a:{})};n.extend=b.Model.extend;var o=m.View=b.View.extend({initialize:function(a){"undefined"!=typeof a&&(this.$container=a.$container,this.options=a.options,this.data=a.data),this._state=m.ViewState.beforeShown},events:{click:"dismiss",mouseenter:"sleep",mouseleave:"wakeup"},dismiss:function(){this.options.tapToDismiss&&this.hide(!0)},sleep:function(){var a=this.options;clearTimeout(this.intervalId),this.$el.stop(!0,!0)[a.showMethod]({duration:a.showDuration,easing:a.showEasing})},wakeup:function(){var a=this.options,b=this;(a.timeout>0||a.extendedTimeout>0)&&(this.intervalId=setTimeout(function(){b.hide()},a.extendedTimeout))},render:function(){return this.options.clearAll&&m.clearAll(this.cid),this.options.overlay&&(j=d(this)),this.$container[this.options.newestOnTop?"prepend":"append"](this.el),this.fadeIn(),this},fadeIn:function(){var a=this.options,b=this.data,d=this;this.$el.hide(),this.$el[a.showMethod]({duration:a.showDuration,easing:a.showEasing,complete:function(){d._state=m.ViewState.afterShown,d.trigger("shown",d,b,a),c.isFunction(a.onShown)&&a.onShown.call(d,b,a)}}),a.timeout>0&&(this.intervalId=setTimeout(function(){d.hide()},a.timeout))},hide:function(a){if(!(this._state>=m.ViewState.beforeHidden||g(":focus",this.$el).length&&!a)){var b=this.options,d=this,e=this.data;return this._state=m.ViewState.beforeHidden,this.$el[b.hideMethod]({duration:b.hideDuration,easing:b.hideEasing,complete:function(){d._state=m.ViewState.afterHidden,d.trigger("hidden",d,e,b),d.removeEl(),delete d.$container[d.cid],0===d.$container.children().length&&(delete i[d.$container.attr("id")],d.$container.remove()),c.isFunction(b.onHidden)&&b.onHidden.call(d,e,b)}})}},removeEl:function(){this.$el.is(":visible")||(this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),b.View.prototype.remove.call(this))},getContainer:function(){return this.container}});return c.extend(m.Notifier.prototype,{initialize:function(){},_includeDefaultVars:function(a,b){if(b.includeDefaultVars&&c.extend(a,{nid:++h,cssClass:b.cssClass+(b.type?" "+b.cssClass+"-"+b.type:""),isLoader:"loader"===b.type}),c.isFunction(this.templateVars)){var d=this.templateVars(b);c.isObject(d)&&c.extend(a,d)}else c.isObject(b.templateVars)&&c.extend(a,b.templateVars)},info:function(a,b){var d=c.extend({type:"info"},c.isObject(b)?b:{});return this.notify(f(a,d),d)},success:function(a,b){var d=c.extend({type:"success"},c.isObject(b)?b:{});return this.notify(f(a,d),d)},warning:function(a,b){var d=c.extend({type:"warning"},c.isObject(b)?b:{});return this.notify(f(a,d),d)},error:function(a,b){var d=c.extend({type:"error"},c.isObject(b)?b:{});return this.notify(f(a,d),d)},loader:function(a,b){var d=c.extend({type:"loader",position:"top-center",overlay:!0,showDuration:150,hideDuration:250,timeout:0,extendedTimeout:0,tapToDismiss:!1,clear:!0},c.isObject(b)?b:{});return this.notify(f(a,d),d)},_getContainer:function(a){var b=a.containerBaseId+"-"+a.position;return i[b]?i[b]:($container=this._createContainer(a,b),i[b]=$container,$container)},_createContainer:function(a,b){return $container=g("<div/>").attr("id",b).addClass(a.containerClass).addClass(a.cssClass+"-"+a.position).attr("aria-live","polite").attr("role","alert"),c.extend($container,{childList:{},clear:function(){0!==this.childList.length&&c.each(this.childList,function(a){a.hide(!0)})}}),$container.appendTo(g(a.target)),$container},_getTemplate:function(a){var b;return c.isFunction(a.templateFn)&&(b=a.templateFn(a)),b||a.template||l},notify:function(a,b){var d=c.extend({},this.defaults),e="undefined"!=typeof b?c.extend(d,b):this.defaults,f=this.defaults.viewClass||o,h=this._getTemplate(e),i=this._getContainer(e);this._includeDefaultVars(a,e);var j=new f({el:g(h(a)),$container:i,options:e,data:a});return i.childList[j.cid]=j,e.render?j.render():j},make:function(a,b,d){var e=c.extend({},this.defaults,c.isObject(a.defaults)?a.defaults:{});c.isObject(d)&&c.extend(e,d);var f=this._getTemplate(e),h=this._getContainer(e);this._includeDefaultVars(b,e);var i=new a({el:g(f(b)),$container:h,options:e,data:b});return h.childList[i.cid]=i,e.render?i.render():i}}),m});
//# sourceMappingURL=backbone.tango.min.js.map