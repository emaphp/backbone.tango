!function(a,b){"function"==typeof define&&define.amd?define(["backbone","underscore"],function(c,d){return b(a,c,d)}):"undefined"!=typeof exports?module.exports=b(a,require("backbone"),require("underscore")):b(a,a.Backbone,a._)}(this,function(a,b,c){function d(a){j||(j=g("<div/>").addClass("tango-overlay"),j._childs={},c.extend(j,b.Events),j.hide(),j.appendTo(g(a.options.target)),j.fadeIn({duration:150,easing:"swing"}));var d=a.cid;return j._childs[d]=a,j.listenTo(a,"hidden",function(){j.stopListening(a),delete j._childs[d],0===c.keys(j._childs).length&&j.fadeOut({duration:250,easing:"swing",complete:function(){e()}})}),j}function e(){j&&(j.remove(),j=null)}function f(a,b){var d={options:b};return c.isObject(a)?c.extend(d,a):d.message=a,d}var g=b.$,h=0,i={},j=null,k={target:"body",containerBaseId:"tango-container",containerClass:"tango-container",viewClass:n,cssClass:"tango",position:"top-right",type:"info",timeout:5e3,newestOnTop:!0,template:void 0,templateFn:void 0,overlay:!1,render:!0,clear:!1,showMethod:"fadeIn",showDuration:250,showEasing:"swing",hideMethod:"fadeOut",hideDuration:650,hideEasing:"swing",onHidden:void 0,onShown:void 0,tapToDismiss:!0,extendedTimeout:1e3},l=c.template('<div class="<%=cssClass%>"><% if (isLoader) { %><div class="tango-loader-pulse"><div></div><div></div><div></div></div><% } %><%=message%></div>'),m=b.Tango=function(a){var b=c.extend({},k);c.isFunction(a)?c.isObject(a.defaults)?(this.defaults=c.extend(b,a.defaults),this.defaults.viewClass=a):this.defaults=c.extend(b,a.call()):this.defaults=c.extend(b,c.isObject(a)?a:{})};m.clearAll=function(a){for(var b in i){var c=i[b].childList;for(var d in c)d!==a&&i[b].childList[d].hide(!0)}},m.defaultTemplate=l,m.extend=b.Model.extend,m.VERSION="0.2.0",m.ViewState={beforeShown:0,afterShown:1,beforeHidden:2,afterHidden:3};var n=m.View=b.View.extend({initialize:function(a){"undefined"!=typeof a&&(this.$container=a.$container,this.options=a.options,this.data=a.data),this._state=m.ViewState.beforeShown},events:{click:"dismiss",mouseenter:"sleep",mouseleave:"wakeup"},dismiss:function(){this.options.tapToDismiss&&this.hide(!0)},sleep:function(){var a=this.options;clearTimeout(this.intervalId),this.$el.stop(!0,!0)[a.showMethod]({duration:a.showDuration,easing:a.showEasing})},wakeup:function(){var a=this.options,b=this;(a.timeout>0||a.extendedTimeout>0)&&(this.intervalId=setTimeout(function(){b.hide()},a.extendedTimeout))},render:function(){return this.options.clear&&m.clearAll(this.cid),this.options.overlay&&(j=d(this)),this.$container[this.options.newestOnTop?"prepend":"append"](this.el),this.fadeIn(),this},fadeIn:function(){var a=this.options,b=this.data,d=this;this.$el.hide(),this.$el[a.showMethod]({duration:a.showDuration,easing:a.showEasing,complete:function(){d._state=m.ViewState.afterShown,d.trigger("shown",d,b,a),c.isFunction(a.onShown)&&a.onShown.call(d,b,a)}}),a.timeout>0&&(this.intervalId=setTimeout(function(){d.hide()},a.timeout))},hide:function(a){if(!(this._state>=m.ViewState.beforeHidden||g(":focus",this.$el).length&&!a)){var b=this.options,d=this,e=this.data;return this._state=m.ViewState.beforeHidden,this.$el[b.hideMethod]({duration:b.hideDuration,easing:b.hideEasing,complete:function(){d._state=m.ViewState.afterHidden,d.trigger("hidden",d,e,b),d.removeEl(),delete d.$container[d.cid],0===d.$container.children().length&&(delete i[d.$container.attr("id")],d.$container.remove()),c.isFunction(b.onHidden)&&b.onHidden.call(d,e,b)}})}},removeEl:function(){this.$el.is(":visible")||(this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),b.View.prototype.remove.call(this))},getContainer:function(){return this.container}});return c.extend(m.prototype,{initialize:function(){},info:function(a,b){var d=c.extend({type:"info"},c.isObject(b)?b:{});return this.notify(f(a,d),d)},success:function(a,b){var d=c.extend({type:"success"},c.isObject(b)?b:{});return this.notify(f(a,d),d)},warning:function(a,b){var d=c.extend({type:"warning"},c.isObject(b)?b:{});return this.notify(f(a,d),d)},error:function(a,b){var d=c.extend({type:"error"},c.isObject(b)?b:{});return this.notify(f(a,d),d)},loader:function(a,b){var d=c.extend({type:"loader",position:"top-center",overlay:!0,showDuration:150,hideDuration:250,timeout:0,extendedTimeout:0,tapToDismiss:!1,clear:!0},c.isObject(b)?b:{});return this.notify(f(a,d),d)},notify:function(a,b){function d(a){return a.containerBaseId+"-"+a.position}function e(a){var b=d(a);return i[b]?i[b]:(q=f(a,b),i[b]=q,q)}function f(a,b){return q=g("<div/>").attr("id",b).addClass(a.containerClass).addClass(a.cssClass+"-"+a.position).attr("aria-live","polite").attr("role","alert"),c.extend(q,{childList:{},clear:function(){0!==this.childList.length&&c.each(this.childList,function(a){a.hide(!0)})}}),q.appendTo(g(a.target)),q}function j(a){var b;return c.isFunction(a.templateFn)&&(b=a.templateFn(a)),b||a.template||l}var k=c.extend({},this.defaults),m="undefined"!=typeof b?c.extend(k,b):this.defaults,o=this.defaults.viewClass||n,p=j(m),q=e(m);c.extend(a,{id:++h,cssClass:m.cssClass+(m.type?" "+m.cssClass+"-"+m.type:""),isLoader:"loader"===m.type});var r=new o({el:g(p(a)),$container:q,options:m,data:a});return q.childList[r.cid]=r,m.render?r.render():r}}),m});
//# sourceMappingURL=backbone.tango.min.js.map
