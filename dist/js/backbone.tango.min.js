!function(a,b){"function"==typeof define&&define.amd?define(["backbone","underscore"],function(c,d){return b(a,c,d)}):"undefined"!=typeof exports?module.exports=b(a,require("backbone"),require("underscore")):b(a,a.Backbone,a._)}(this,function(a,b,c){function d(a,b){var d={options:b};return c.isObject(a)?c.extend(d,a):d.message=a,d}var e=b.$,f=0,g={},h={target:"body",defaultClass:"tango",containerBaseId:"tango-container",containerClass:"tango-container",position:"top-right",type:"info",timeOut:5e3,newestOnTop:!0,template:void 0,view:void 0,showMethod:"fadeIn",showDuration:250,showEasing:"swing",hideMethod:"fadeOut",hideDuration:850,hideEasing:"swing",onHidden:void 0,onShown:void 0,tapToDismiss:!0,extendedTimeOut:1e3},i=b.Tango=function(a){this.defaults=c.extend(c.extend({},h),a),this.initialize.apply(this,arguments)};i.extend=b.Model.extend,i.VERSION="0.1.0",i.ViewState={beforeShown:0,afterShown:1,beforeHidden:2,afterHidden:3};var j=i.NotificationView=b.View.extend({initialize:function(a){"undefined"!=typeof a&&(this.$container=a.$container,this.options=a.options,this.data=a.data),this._state=i.ViewState.beforeShown},events:{click:"dismiss",mouseenter:"sleep",mouseleave:"wakeup"},dismiss:function(){this.options.tapToDismiss&&this.hide(!0)},sleep:function(){var a=this.options;clearTimeout(this.intervalId),this.$el.stop(!0,!0)[a.showMethod]({duration:a.showDuration,easing:a.showEasing})},wakeup:function(){var a=this.options,b=this;(a.timeOut>0||a.extendedTimeOut>0)&&(this.intervalId=setTimeout(function(){b.hide()},a.extendedTimeOut))},render:function(){return this.$container[this.options.newestOnTop?"prepend":"append"](this.el),this.fadeIn(),this},fadeIn:function(){var a=this.options,b=this.data,d=this;this.$el.hide(),this.$el[a.showMethod]({duration:a.showDuration,easing:a.showEasing,complete:function(){d._state=i.ViewState.afterShown,d.trigger("shown",d),c.isFunction(a.onShown)&&a.onShown.call(d,b,a)}}),a.timeOut>0&&(this.intervalId=setTimeout(function(){d.hide()},a.timeOut))},hide:function(a){if(!(this._state>=i.ViewState.beforeHidden||e(":focus",this.$el).length&&!a)){var b=this.options,d=this;return d._state=i.ViewState.beforeHidden,this.$el[b.hideMethod]({duration:b.hideDuration,easing:b.hideEasing,complete:function(){this._state=i.ViewState.afterHidden,d.trigger("hidden",d),d.removeEl(),delete d.$container[d.cid],0===d.$container.children().length&&(delete g[d.$container.attr("id")],d.$container.remove()),c.isFunction(b.onHidden)&&b.onHidden.call()}})}},removeEl:function(){this.$el.is(":visible")||(this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),b.View.prototype.remove.call(this))},getContainer:function(){return this.container}},{template:c.template('<div class="<%=cssClass%>"><%=message%></div>'),templateFn:void 0});return c.extend(i.prototype,{initialize:function(){},info:function(a,b){var e=c.extend({type:"info"},c.isObject(b)?b:{});return this.notify(d(a,e),e)},success:function(a,b){var e=c.extend({type:"success"},c.isObject(b)?b:{});return this.notify(d(a,e),e)},warning:function(a,b){var e=c.extend({type:"warning"},c.isObject(b)?b:{});return this.notify(d(a,e),e)},error:function(a,b){var e=c.extend({type:"error"},c.isObject(b)?b:{});return this.notify(d(a,e),e)},notify:function(a,b){function d(a){return a.containerBaseId+"-"+a.position}function h(a){var b=d(a);return g[b]?g[b]:(o=e("#"+b),o=i(a,b),g[b]=o,o)}function i(a,b){return o=e("<div/>").attr("id",b).addClass(a.containerClass).addClass(a.defaultClass+"-"+a.position).attr("aria-live","polite").attr("role","alert"),o=c.extend(o,{childList:{},clear:function(){0!==this.childList.length&&c.each(this.childList,function(a){a.hide(!0)})}}),o.appendTo(e(a.target)),o}function k(a,b){return c.isFunction(a.templateFn)?a.template(b):a.template}var l="undefined"!=typeof b?c.extend(this.defaults,b):this.defaults,m=l.view||j,n=l.template||k(m,l),o=h(l);c.extend(a,{id:++f,cssClass:l.defaultClass+(l.type?" "+l.defaultClass+"-"+l.type:"")});var p=new m({el:e(n(a)),$container:o,options:l,data:a});return o.childList[p.cid]=p,p.render()}}),i});
//# sourceMappingURL=backbone.tango.min.js.map