!function(a,b){"function"==typeof define&&define.amd?define(["backbone","underscore"],function(c,d){return b(a,c,d)}):"undefined"!=typeof exports?module.exports=b(a,require("backbone"),require("underscore")):b(a,a.Backbone,a._)}(this,function(a,b,c){function d(a,b){var d={options:b};return c.isObject(a)?c.extend(d,a):d.message=a,d}var e=b.$,f=0,g={},h={target:"body",containerBaseId:"tango-container",containerClass:"tango-container",defaultClass:"tango",position:"top-right",type:"info",timeout:5e3,newestOnTop:!0,template:void 0,templateFn:void 0,render:!0,showMethod:"fadeIn",showDuration:250,showEasing:"swing",hideMethod:"fadeOut",hideDuration:850,hideEasing:"swing",onHidden:void 0,onShown:void 0,tapToDismiss:!0,extendedTimeout:1e3},i=c.template('<div class="<%=cssClass%>"><%=message%></div>'),j=b.Tango=function(a){c.isFunction(a)?(this.defaults=c.extend(c.extend({},h),c.isObject(a.options)?a.options:{}),this.viewClass=a):(this.defaults=c.extend(c.extend({},h),c.isObject(a)?a:{}),this.viewClass=k),this.initialize.apply(this,arguments)};j.defaultTemplate=i,j.extend=b.Model.extend,j.Version="0.1.2",j.ViewState={beforeShown:0,afterShown:1,beforeHidden:2,afterHidden:3};var k=j.View=b.View.extend({initialize:function(a){"undefined"!=typeof a&&(this.$container=a.$container,this.options=a.options,this.data=a.data),this._state=j.ViewState.beforeShown},events:{click:"dismiss",mouseenter:"sleep",mouseleave:"wakeup"},dismiss:function(){this.options.tapToDismiss&&this.hide(!0)},sleep:function(){var a=this.options;clearTimeout(this.intervalId),this.$el.stop(!0,!0)[a.showMethod]({duration:a.showDuration,easing:a.showEasing})},wakeup:function(){var a=this.options,b=this;(a.timeout>0||a.extendedTimeout>0)&&(this.intervalId=setTimeout(function(){b.hide()},a.extendedTimeout))},render:function(){return this.$container[this.options.newestOnTop?"prepend":"append"](this.el),this.fadeIn(),this},fadeIn:function(){var a=this.options,b=this.data,d=this;this.$el.hide(),this.$el[a.showMethod]({duration:a.showDuration,easing:a.showEasing,complete:function(){d._state=j.ViewState.afterShown,d.trigger("shown",d,b,a),c.isFunction(a.onShown)&&a.onShown.call(d,b,a)}}),a.timeout>0&&(this.intervalId=setTimeout(function(){d.hide()},a.timeout))},hide:function(a){if(!(this._state>=j.ViewState.beforeHidden||e(":focus",this.$el).length&&!a)){var b=this.options,d=this,f=this.data;return this._state=j.ViewState.beforeHidden,this.$el[b.hideMethod]({duration:b.hideDuration,easing:b.hideEasing,complete:function(){d._state=j.ViewState.afterHidden,d.trigger("hidden",d,f,b),d.removeEl(),delete d.$container[d.cid],0===d.$container.children().length&&(delete g[d.$container.attr("id")],d.$container.remove()),c.isFunction(b.onHidden)&&b.onHidden.call(d,f,b)}})}},removeEl:function(){this.$el.is(":visible")||(this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),b.View.prototype.remove.call(this))},getContainer:function(){return this.container}});return c.extend(j.prototype,{initialize:function(){},info:function(a,b){var e=c.extend({type:"info"},c.isObject(b)?b:{});return this.notify(d(a,e),e)},success:function(a,b){var e=c.extend({type:"success"},c.isObject(b)?b:{});return this.notify(d(a,e),e)},warning:function(a,b){var e=c.extend({type:"warning"},c.isObject(b)?b:{});return this.notify(d(a,e),e)},error:function(a,b){var e=c.extend({type:"error"},c.isObject(b)?b:{});return this.notify(d(a,e),e)},notify:function(a,b){function d(a){return a.containerBaseId+"-"+a.position}function h(a){var b=d(a);return g[b]?g[b]:(p=j(a,b),g[b]=p,p)}function j(a,b){return p=e("<div/>").attr("id",b).addClass(a.containerClass).addClass(a.defaultClass+"-"+a.position).attr("aria-live","polite").attr("role","alert"),c.extend(p,{childList:{},clear:function(){0!==this.childList.length&&c.each(this.childList,function(a){a.hide(!0)})}}),p.appendTo(e(a.target)),p}function l(a){var b;return c.isFunction(a.templateFn)&&(b=a.templateFn(a)),b||a.template||i}var m="undefined"!=typeof b?c.extend(c.extend({},this.defaults),b):this.defaults,n=this.viewClass||k,o=l(m),p=h(m);c.extend(a,{id:++f,cssClass:m.defaultClass+(m.type?" "+m.defaultClass+"-"+m.type:"")});var q=new n({el:e(o(a)),$container:p,options:m,data:a});return p.childList[q.cid]=q,m.render?q.render():q}}),j});
//# sourceMappingURL=backbone.tango.min.js.map
